var RUMClient=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=20)}([function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(18).Buffer,o={FPNN_EC_PROTO_UNKNOWN_ERROR:10001,FPNN_EC_PROTO_NOT_SUPPORTED:10002,FPNN_EC_PROTO_INVALID_PACKAGE:10003,FPNN_EC_PROTO_JSON_CONVERT:10004,FPNN_EC_PROTO_STRING_KEY:10005,FPNN_EC_PROTO_MAP_VALUE:10006,FPNN_EC_PROTO_METHOD_TYPE:10007,FPNN_EC_PROTO_PROTO_TYPE:10008,FPNN_EC_PROTO_KEY_NOT_FOUND:10009,FPNN_EC_PROTO_TYPE_CONVERT:10010,FPNN_EC_CORE_UNKNOWN_ERROR:20001,FPNN_EC_CORE_CONNECTION_CLOSED:20002,FPNN_EC_CORE_TIMEOUT:20003,FPNN_EC_CORE_UNKNOWN_METHOD:20004,FPNN_EC_CORE_ENCODING:20005,FPNN_EC_CORE_DECODING:20006,FPNN_EC_CORE_SEND_ERROR:20007,FPNN_EC_CORE_RECV_ERROR:20008,FPNN_EC_CORE_INVALID_PACKAGE:20009,FPNN_EC_CORE_HTTP_ERROR:20010,FPNN_EC_CORE_WORK_QUEUE_FULL:20011,FPNN_EC_CORE_INVALID_CONNECTION:20012,FPNN_EC_CORE_FORBIDDEN:20013,FPNN_EC_CORE_SERVER_STOPPING:20014},s=r.from([0,1]),a=r.from([64,128]),u=r.from([0,1,2]),l=r.from("FPNN"),c=r.from("POST"),f=["secp256k1","secp224r1"],h=["aes-128-cfb","aes-256-cfb"],p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"BUFFER",get:function(){return r}},{key:"ERROR_CODE",get:function(){return o}},{key:"FP_FLAG",get:function(){return a}},{key:"FP_MESSAGE_TYPE",get:function(){return u}},{key:"TCP_MAGIC",get:function(){return l}},{key:"HTTP_MAGIC",get:function(){return c}},{key:"FPNN_VERSION",get:function(){return s}},{key:"READ_BUFFER_LEN",get:function(){return 1024}},{key:"CHECK_CBS_INTERVAL",get:function(){return 1e3}},{key:"SEND_TIMEOUT",get:function(){return 2e4}},{key:"CRYPTO_CURVES",get:function(){return f}},{key:"CRYPTO_ALGORITHM",get:function(){return h}}]),t}();t.exports=p},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"assign",value:function(t){if(!t||t.hasOwnProperty("events"))throw new Error(t+" is null or hasOwnProperty [ events ]");if(t.hasOwnProperty("on")||t.hasOwnProperty("emit")||t.hasOwnProperty("removeEvent"))throw new Error(t+" hasOwnProperty [ on | emit | removeEvent | listenerCount]");t.events={},t.on=function(e,i){t.events.hasOwnProperty(e)||(t.events[e]=[]),-1==t.events[e].indexOf(i)&&t.events[e].push(i)},t.emit=function(){if(0!=arguments.length)for(var e=t.events[arguments[0]]||[],i=0;i<e.length;i++){var n=e[i];if(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n.apply(t,r)}}},t.removeEvent=function(){if(0!=arguments.length)if(1!=arguments.length){var e=arguments[0],i=t.events[e].indexOf(arguments[1]);i>-1&&t.events[e].splice(i,1)}else{var n=arguments[0];t.events.hasOwnProperty(n)&&delete t.events[n]}else t.events={}},t.listenerCount=function(e){return t.events.hasOwnProperty(e)?(t.events[e]||[]).length:0}}}]),t}();t.exports=r},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"VERSION",get:function(){return"1.0.9"}},{key:"PING_INTERVAL",get:function(){return 2e4}},{key:"SENT_TIMEOUT",get:function(){return 2e4}},{key:"RESET_OPENEVENT_INTERVAL",get:function(){return 18e5}},{key:"RESET_OPENEVENT_INTERVAL_MOBILE",get:function(){return 6e4}},{key:"EVENT_QUEUE_LIMIT",get:function(){return 1e3}},{key:"STORAGE_SIZE_LIMIT",get:function(){return 2097152}},{key:"LOCAL_STORAGE_DELAY",get:function(){return 1e3}},{key:"SENT_SIZE_LIMIT",get:function(){return 15360}}]),t}();t.exports=r},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&p())}function p(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function _(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new d(t,e)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */!function(){"use strict";function t(t){if(t)d[0]=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0,this.blocks=d,this.buffer8=l;else if(a){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var r="input is invalid type",e="object"==typeof window,i=e?window:{};i.JS_MD5_NO_WINDOW&&(e=!1);var s=!e&&"object"==typeof self,h=!i.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;h?i=global:s&&(i=self);var f=!i.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,o=__webpack_require__(2),a=!i.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,n="0123456789abcdef".split(""),u=[128,32768,8388608,-2147483648],y=[0,8,16,24],c=["hex","array","digest","buffer","arrayBuffer","base64"],p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),d=[],l;if(a){var A=new ArrayBuffer(68);l=new Uint8Array(A),d=new Uint32Array(A)}!i.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!a||!i.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var b=function(e){return function(i){return new t(!0).update(i)[e]()}},v=function(){var e=b("hex");h&&(e=w(e)),e.create=function(){return new t},e.update=function(t){return e.create().update(t)};for(var i=0;i<c.length;++i){var n=c[i];e[n]=b(n)}return e},w=function(t){var e=eval("require('crypto')"),i=eval("require('buffer').Buffer"),s=function(n){if("string"==typeof n)return e.createHash("md5").update(n,"utf8").digest("hex");if(null===n||void 0===n)throw r;return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===i?e.createHash("md5").update(new i(n)).digest("hex"):t(n)};return s};t.prototype.update=function(t){if(!this.finalized){var e,i=typeof t;if("string"!==i){if("object"!==i)throw r;if(null===t)throw r;if(a&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||a&&ArrayBuffer.isView(t)))throw r;e=!0}for(var n,o,s=0,u=t.length,l=this.blocks,c=this.buffer8;s<u;){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)if(a)for(o=this.start;s<u&&o<64;++s)c[o++]=t[s];else for(o=this.start;s<u&&o<64;++s)l[o>>2]|=t[s]<<y[3&o++];else if(a)for(o=this.start;s<u&&o<64;++s)(n=t.charCodeAt(s))<128?c[o++]=n:n<2048?(c[o++]=192|n>>6,c[o++]=128|63&n):n<55296||n>=57344?(c[o++]=224|n>>12,c[o++]=128|n>>6&63,c[o++]=128|63&n):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++s)),c[o++]=240|n>>18,c[o++]=128|n>>12&63,c[o++]=128|n>>6&63,c[o++]=128|63&n);else for(o=this.start;s<u&&o<64;++s)(n=t.charCodeAt(s))<128?l[o>>2]|=n<<y[3&o++]:n<2048?(l[o>>2]|=(192|n>>6)<<y[3&o++],l[o>>2]|=(128|63&n)<<y[3&o++]):n<55296||n>=57344?(l[o>>2]|=(224|n>>12)<<y[3&o++],l[o>>2]|=(128|n>>6&63)<<y[3&o++],l[o>>2]|=(128|63&n)<<y[3&o++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++s)),l[o>>2]|=(240|n>>18)<<y[3&o++],l[o>>2]|=(128|n>>12&63)<<y[3&o++],l[o>>2]|=(128|n>>6&63)<<y[3&o++],l[o>>2]|=(128|63&n)<<y[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[e>>2]|=u[3&e],e>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},t.prototype.hash=function(){var t,e,i,n,r,o,s=this.blocks;this.first?e=((e=((t=((t=s[0]-680876937)<<7|t>>>25)-271733879<<0)^(i=((i=(-271733879^(n=((n=(-1732584194^2004318071&t)+s[1]-117830708)<<12|n>>>20)+t<<0)&(-271733879^t))+s[2]-1126478375)<<17|i>>>15)+n<<0)&(n^t))+s[3]-1316259209)<<22|e>>>10)+i<<0:(t=this.h0,e=this.h1,i=this.h2,e=((e+=((t=((t+=((n=this.h3)^e&(i^n))+s[0]-680876936)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+s[1]-389564586)<<12|n>>>20)+t<<0)&(t^e))+s[2]+606105819)<<17|i>>>15)+n<<0)&(n^t))+s[3]-1044525330)<<22|e>>>10)+i<<0),e=((e+=((t=((t+=(n^e&(i^n))+s[4]-176418897)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+s[5]+1200080426)<<12|n>>>20)+t<<0)&(t^e))+s[6]-1473231341)<<17|i>>>15)+n<<0)&(n^t))+s[7]-45705983)<<22|e>>>10)+i<<0,e=((e+=((t=((t+=(n^e&(i^n))+s[8]+1770035416)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+s[9]-1958414417)<<12|n>>>20)+t<<0)&(t^e))+s[10]-42063)<<17|i>>>15)+n<<0)&(n^t))+s[11]-1990404162)<<22|e>>>10)+i<<0,e=((e+=((t=((t+=(n^e&(i^n))+s[12]+1804603682)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+s[13]-40341101)<<12|n>>>20)+t<<0)&(t^e))+s[14]-1502002290)<<17|i>>>15)+n<<0)&(n^t))+s[15]+1236535329)<<22|e>>>10)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+s[1]-165796510)<<5|t>>>27)+e<<0)^e))+s[6]-1069501632)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+s[11]+643717713)<<14|i>>>18)+n<<0)^n))+s[0]-373897302)<<20|e>>>12)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+s[5]-701558691)<<5|t>>>27)+e<<0)^e))+s[10]+38016083)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+s[15]-660478335)<<14|i>>>18)+n<<0)^n))+s[4]-405537848)<<20|e>>>12)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+s[9]+568446438)<<5|t>>>27)+e<<0)^e))+s[14]-1019803690)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+s[3]-187363961)<<14|i>>>18)+n<<0)^n))+s[8]+1163531501)<<20|e>>>12)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+s[13]-1444681467)<<5|t>>>27)+e<<0)^e))+s[2]-51403784)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+s[7]+1735328473)<<14|i>>>18)+n<<0)^n))+s[12]-1926607734)<<20|e>>>12)+i<<0,e=((e+=((o=(n=((n+=((r=e^i)^(t=((t+=(r^n)+s[5]-378558)<<4|t>>>28)+e<<0))+s[8]-2022574463)<<11|n>>>21)+t<<0)^t)^(i=((i+=(o^e)+s[11]+1839030562)<<16|i>>>16)+n<<0))+s[14]-35309556)<<23|e>>>9)+i<<0,e=((e+=((o=(n=((n+=((r=e^i)^(t=((t+=(r^n)+s[1]-1530992060)<<4|t>>>28)+e<<0))+s[4]+1272893353)<<11|n>>>21)+t<<0)^t)^(i=((i+=(o^e)+s[7]-155497632)<<16|i>>>16)+n<<0))+s[10]-1094730640)<<23|e>>>9)+i<<0,e=((e+=((o=(n=((n+=((r=e^i)^(t=((t+=(r^n)+s[13]+681279174)<<4|t>>>28)+e<<0))+s[0]-358537222)<<11|n>>>21)+t<<0)^t)^(i=((i+=(o^e)+s[3]-722521979)<<16|i>>>16)+n<<0))+s[6]+76029189)<<23|e>>>9)+i<<0,e=((e+=((o=(n=((n+=((r=e^i)^(t=((t+=(r^n)+s[9]-640364487)<<4|t>>>28)+e<<0))+s[12]-421815835)<<11|n>>>21)+t<<0)^t)^(i=((i+=(o^e)+s[15]+530742520)<<16|i>>>16)+n<<0))+s[2]-995338651)<<23|e>>>9)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+s[0]-198630844)<<6|t>>>26)+e<<0)|~i))+s[7]+1126891415)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+s[14]-1416354905)<<15|i>>>17)+n<<0)|~t))+s[5]-57434055)<<21|e>>>11)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+s[12]+1700485571)<<6|t>>>26)+e<<0)|~i))+s[3]-1894986606)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+s[10]-1051523)<<15|i>>>17)+n<<0)|~t))+s[1]-2054922799)<<21|e>>>11)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+s[8]+1873313359)<<6|t>>>26)+e<<0)|~i))+s[15]-30611744)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+s[6]-1560198380)<<15|i>>>17)+n<<0)|~t))+s[13]+1309151649)<<21|e>>>11)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+s[4]-145523070)<<6|t>>>26)+e<<0)|~i))+s[11]-1120210379)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+s[2]+718787259)<<15|i>>>17)+n<<0)|~t))+s[9]-343485551)<<21|e>>>11)+i<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=i-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+i<<0,this.h3=this.h3+n<<0)},t.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,r=this.h3;return n[t>>4&15]+n[15&t]+n[t>>12&15]+n[t>>8&15]+n[t>>20&15]+n[t>>16&15]+n[t>>28&15]+n[t>>24&15]+n[e>>4&15]+n[15&e]+n[e>>12&15]+n[e>>8&15]+n[e>>20&15]+n[e>>16&15]+n[e>>28&15]+n[e>>24&15]+n[i>>4&15]+n[15&i]+n[i>>12&15]+n[i>>8&15]+n[i>>20&15]+n[i>>16&15]+n[i>>28&15]+n[i>>24&15]+n[r>>4&15]+n[15&r]+n[r>>12&15]+n[r>>8&15]+n[r>>20&15]+n[r>>16&15]+n[r>>28&15]+n[r>>24&15]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},t.prototype.buffer=t.prototype.arrayBuffer,t.prototype.base64=function(){for(var t,e,i,n="",r=this.array(),o=0;o<15;)t=r[o++],e=r[o++],i=r[o++],n+=p[t>>>2]+p[63&(t<<4|e>>>4)]+p[63&(e<<2|i>>>6)]+p[63&i];return t=r[o],n+(p[t>>>2]+p[t<<4&63]+"==")};var _=v();f?module.exports=_:(i.md5=_,o&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(5),__webpack_require__(4))},function(t,e,i){var n;
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
!function(r,o){"use strict";var s="model",a="name",u="type",l="vendor",c="version",f="mobile",h="tablet",p={extend:function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"==typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(t,e){for(var i,n,r,o,s,a,u=0;u<e.length&&!s;){var l=e[u],c=e[u+1];for(i=n=0;i<l.length&&!s;)if(s=l[i++].exec(t))for(r=0;r<c.length;r++)a=s[++n],"object"==typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;u+=2}},str:function(t,e){for(var i in e)if("object"==typeof e[i]&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(p.has(e[i][n],t))return"?"===i?void 0:i}else if(p.has(e[i],t))return"?"===i?void 0:i;return t}},_={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,c],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[a,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],c],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[a,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[a,c],[/(QQ)\/([\d\.]+)/i],[a,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,c],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[a,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[a,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[a],[/(LBBROWSER)/i],[a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[a,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,c],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[c,d.str,_.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[s,l,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[l,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,s,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[s,[l,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[s,d.str,_.device.amazon.model],[l,"Amazon"],[u,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,l,[u,f]],[/\((ip[honed|\s\w*]+);/i],[s,[l,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,s,[u,f]],[/\(bb10;\s(\w+)/i],[s,[l,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[s,[l,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[s,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[s,[l,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,s,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,d.str,_.device.sprint.vendor],[s,d.str,_.device.sprint.model],[u,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,s,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[s,/_/g," "],[u,f]],[/(nexus\s9)/i],[s,[l,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[s,[l,"Huawei"],[u,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,s,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[l,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[l,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[l,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,p.trim],[s,p.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[s,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],s,[u,h]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],s,[u,f]],[/sie-(\w*)/i],[s,[l,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],s,[u,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[s,[l,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[l,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],s,[u,h]],[/(lg) netcast\.tv/i],[l,s,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[l,"LG"],[u,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[l,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[l,s,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[l,s,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,s,[u,f]],[/crkey/i],[[s,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[s,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[s,[l,"Google"],[u,h]],[/android.+;\s(pixel xl|pixel)\s/i],[s,[l,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[l,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[l,"Meizu"],[u,h]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[s,[l,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[l,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[s,[l,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[l,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],s,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[l,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[s,[l,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[l,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[l,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],s,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[s,[l,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[s,[l,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],s,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],s,[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[l,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,s,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[l,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,s,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[l,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[s,[l,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,s,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,p.lowerize],l,s],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[c,d.str,_.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[c,d.str,_.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[a,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[a,"Symbian"],c],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[a,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[a,c],[/(haiku)\s(\w+)/i],[a,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[a,c]]},g=function(t,e){if("object"==typeof t&&(e=t,t=void 0),!(this instanceof g))return new g(t,e).getResult();var i=t||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=e?p.extend(y,e):y;return this.getBrowser=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,i,n.browser),t.major=p.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return d.rgx.call(t,i,n.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(t,i,n.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,i,n.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,i,n.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=t,this},this};g.VERSION="0.7.18",g.BROWSER={NAME:a,MAJOR:"major",VERSION:c},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:s,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:a,VERSION:c},g.OS={NAME:a,VERSION:c},void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=g),e.UAParser=g):i(2)?void 0===(n=function(){return g}.call(e,i,e,t))||(t.exports=n):r&&(r.UAParser=g);var v=r&&(r.jQuery||r.Zepto);if(void 0!==v){var m=new g;v.ua=m.getResult(),v.ua.get=function(){return m.getUA()},v.ua.set=function(t){m.setUA(t);var e=m.getResult();for(var i in e)v.ua[i]=e[i]}}}("object"==typeof window?window:this)},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ua=i(7)()}return n(t,[{key:"setItem",value:function(t,e){var i=null;try{i=JSON.stringify(e)}catch(t){i=e}try{window.localStorage.setItem(t,i)}catch(t){return!1}return!0}},{key:"getItem",value:function(t){var e=null,i=null;try{i=window.localStorage.getItem(t)}catch(t){}i||(i={});try{e=JSON.parse(i)}catch(t){e=i}return e}},{key:"removeItem",value:function(t){if(window.localStorage&&window.localStorage.hasOwnProperty(t))try{return window.localStorage.removeItem(t),!0}catch(t){}return!1}},{key:"httpRequest",value:function(t,e){(function(t,e){var i=new XMLHttpRequest;i&&(i.open("GET",t,!0),i.onload=function(){var t=JSON.parse(i.responseText);4==i.readyState&&"200"==i.status&&e&&e(null,t)},i.send(null))}).call(this,t,e)}},{key:"addSelfListener",value:function(){(function(){var t=this,e=void 0,i=void 0;void 0!==document.hidden?(e="hidden",i="visibilitychange","visibilityState"):void 0!==document.mozHidden?(e="mozHidden",i="mozvisibilitychange","mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",i="msvisibilitychange","msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange","webkitVisibilityState");document.addEventListener(i,function(){t.emit("visible_change",!document[e])},!1)}).call(this)}},{key:"lang",get:function(){return navigator.language}},{key:"manu",get:function(){return this._ua.device.vendor||navigator.vendor}},{key:"model",get:function(){return this._ua.device.model||this._ua.browser.name}},{key:"os",get:function(){return this._ua.os.name}},{key:"osv",get:function(){return this._ua.os.version}},{key:"network",get:function(){return navigator.connection&&navigator.connection.effectiveType}},{key:"isMobile",get:function(){return"mobile"===this._ua.device.type}},{key:"screenheight",get:function(){return window.screen.height}},{key:"screenwidth",get:function(){return window.screen.width}},{key:"carrier",get:function(){return null}},{key:"from",get:function(){return null}},{key:"tickNow",get:function(){return function(){return Date.now()}.call(this)}}]),t}();t.exports=r},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(3),o="event_cache",s="event_map_0",a="event_map_1",u="event_map_2",l="event_map_3",c=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=null,this._events=null,this._debug=n,this._timestamp=0,this._secondInterval=0,this._delayCount=0,this._platformRum=i,this._rum_events_storage="rum_events_"+e,this._storageSize=0,this._storageTimeout=0,this._sizeLimit=r.SENT_SIZE_LIMIT,function(){this._events=this._platformRum.getItem(this._rum_events_storage),function t(){var e=this;this._storageSize=_.call(this,JSON.stringify(this._events));var i=r.LOCAL_STORAGE_DELAY*Math.ceil(this._storageSize/this._sizeLimit);this._storageSize>r.STORAGE_SIZE_LIMIT?this._platformRum.setItem(this._rum_events_storage,{}):this._platformRum.setItem(this._rum_events_storage,this._events);this._storageTimeout&&(clearTimeout(this._storageTimeout),this._storageTimeout=0);this._storageTimeout=setTimeout(function(){t.call(e)},i)}.call(this)}.call(this),g.call(this)}return n(t,[{key:"updateConfig",value:function(t){this._config=t;var e=f.call(this,s);for(var i in e){var n=y.call(this,i);if(n){var r=f.call(this,n);r[i]?r[i]=e[i].concat(r[i]):r[i]=e[i]}else this._debug&&console.log("[RUM] disable event & will be discard!",e[i]);delete e[i]}h.call(this,s,e);var a=f.call(this,o);if(!p.call(this,a))for(var u in a)this.writeEvent(a[u],!0);h.call(this,o,{})}},{key:"writeEvent",value:function(t,e,i){var n=t.ev;if(e){var o=f.call(this,l);return o[n]||(o[n]=[]),o[n].length>=r.EVENT_QUEUE_LIMIT&&(this._debug&&console.log("[RUM] event(retry) queue limit & will be shift!",n),o[n].shift()),o[n].push(t),void h.call(this,l,o)}var s=y.call(this,n);if(s){var a=f.call(this,s);a[n]||(a[n]=[]),a[n].length>=r.EVENT_QUEUE_LIMIT&&(this._debug&&console.log("[RUM] event(normal) queue limit & will be shift!",t),a[n].shift()),a[n].push(t),h.call(this,s,a)}else this._debug&&console.log("[RUM] disable event & will be discard!",n);i&&this._platformRum.setItem(this._rum_events_storage,this._events)}},{key:"writeEvents",value:function(t,e){for(var i in t)this.writeEvent(t[i],e)}},{key:"clearStorage",value:function(){this._platformRum.setItem(this._rum_events_storage,{})}},{key:"clearStorageEvents",value:function(t){var e=f.call(this,o);for(var i in t)delete e[t[i].eid];h.call(this,o,e)}},{key:"getSentEvents",value:function(){var t={size:0,events:[]};return d.call(this,t,a),t.size>=this._sizeLimit?t.events:(d.call(this,t,u),t.size>=this._sizeLimit?t.events:(d.call(this,t,l),this._sizeLimit,t.events))}},{key:"isEmpty",value:function(t){return p.call(this,t)}},{key:"destroy",value:function(){this._secondInterval&&(clearInterval(this._secondInterval),this._secondInterval=0),this._storageTimeout&&(clearTimeout(this._storageTimeout),this._storageTimeout=0),this._config=null,this._delayCount=0,this._platformRum&&(this._platformRum=null)}},{key:"sizeof",value:function(t){if(!t)return 0;if("[object String]"===Object.prototype.toString.call(t))return _.call(this,t);if("[object ArrayBuffer]"===Object.prototype.toString.call(t))return t.byteLength;try{return _.call(this,JSON.stringify(t))}catch(t){}return 0}},{key:"timestamp",set:function(t){this._secondInterval&&(clearInterval(this._secondInterval),this._secondInterval=0),t<this._timestamp?this._delayCount=this._timestamp-t:this._timestamp=t,g.call(this)},get:function(){return this._timestamp}},{key:"storageSize",get:function(){return this._storageSize}},{key:"rumConfig",get:function(){return this._config}},{key:"sizeLimit",set:function(t){t>0&&(this._sizeLimit=t)}}]),t}();function f(t){return this._events[t]||(this._events[t]={}),this._events[t]}function h(t,e){this._events[t]=e}function p(t){return!t||(void 0==t||("[object String]"===Object.prototype.toString.call(t)?""==t:"[object Array]"===Object.prototype.toString.call(t)?0==t.length:"[object Object]"===Object.prototype.toString.call(t)&&0==Object.getOwnPropertyNames(t).length))}function d(t,e){var i=f.call(this,e);if(!p.call(this,i)){var n=[],r=f.call(this,o);for(var s in i){for(;i[s].length&&t.size<this._sizeLimit;){var a=i[s].shift();if(!a.ts){if(!this._timestamp){n.push(a);continue}a.ts=this._timestamp}for(var u in a)"[object Boolean]"!==Object.prototype.toString.call(a[u])&&(a[u]&&0!=a[u].length||delete a[u]);t.events.push(a),r[a.eid]=a,t.size+=_.call(this,JSON.stringify(a))}if(0==i[s].length&&delete i[s],t.size>=this._sizeLimit)break}h.call(this,e,i),n.length&&this.writeEvents(n)}}function _(t){for(var e=0,i=null,n=0;n<t.length;n++)e+=(i=t.charCodeAt(n))<=127?1:i<=2047?2:i<=65535?3:4;return e}function y(t){return this._config?this._config[1]&&this._config[1].indexOf(t)>-1?a:this._config[2]&&this._config[2].indexOf(t)>-1?u:this._config[3]&&this._config[3].indexOf(t)>-1?l:null:s}function g(){if(this._timestamp&&!this._secondInterval){var t=this;this._secondInterval=setInterval(function(){t._delayCount?t._delayCount--:t._timestamp++},1e3)}}t.exports=c},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._endpoint=e,this._targetEndpoint=null}return n(t,[{key:"buildProxyData",value:function(t){return JSON.stringify({endpoint:this._targetEndpoint,data:t})}},{key:"endpoint",get:function(){return this._endpoint}},{key:"targetEndpoint",get:function(){return this._targetEndpoint},set:function(t){this._targetEndpoint=t}}]),t}();t.exports=r},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(1),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.assign(this)}return n(t,[{key:"service",value:function(t,e){this.emit(t.method,t.payload,e)}},{key:"destroy",value:function(){this.removeEvent()}}]),t}();t.exports=o},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(0),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cbMap={},this._exMap={},function(){var t=this;setInterval(function(){for(var e in t._exMap)t._exMap[e]>Date.now()||s.call(t,e,new Error("timeout with expire"))},r.CHECK_CBS_INTERVAL)}.call(this)}return n(t,[{key:"addCb",value:function(t,e,i){this._cbMap.hasOwnProperty(t)||(this._cbMap[t]=e),i||(i=r.SEND_TIMEOUT),this._exMap[t]=i+Date.now()}},{key:"removeCb",value:function(t){if(t)(function(t){var e=this;setTimeout(function(){a.call(e,t)},0)}).call(this,t);else for(var e in this._cbMap)s.call(this,e,new Error("timeout with closed!"))}},{key:"execCb",value:function(t,e){s.call(this,t,e)}}]),t}();function s(t,e){var i=this;setTimeout(function(){(function(t,e){if(this._cbMap.hasOwnProperty(t)){var i=this._cbMap[t];a.call(this,t),i&&i(e)}}).call(i,t,e)},0)}function a(t){this._cbMap.hasOwnProperty(t)&&delete this._cbMap[t],this._exMap.hasOwnProperty(t)&&delete this._exMap[t]}t.exports=o},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(0),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"buildPkgData",value:function(t){var e={};return e.magic=t.magic||r.TCP_MAGIC,e.version=t.version||0,e.flag=t.flag||0,e.mtype=t.mtype||0,e.ss=t.ss||0,e.method=t.method||null,e.seq=t.seq||0,e.payload=t.payload||null,e.payload&&(e.psize=r.BUFFER.byteLength(e.payload)),e.method&&(e.ss=r.BUFFER.byteLength(e.method)),e.wpos=0,e}},{key:"cbKey",value:function(t){return t.magic+"_"+t.seq}},{key:"isHTTP",value:function(t){return r.HTTP_MAGIC.equals(t.magic)}},{key:"isTCP",value:function(t){return r.TCP_MAGIC.equals(t.magic)}},{key:"isMsgPack",value:function(t){return 1==t.flag}},{key:"isJson",value:function(t){return 0==t.flag}},{key:"isOneWay",value:function(t){return 0==t.mtype}},{key:"isTwoWay",value:function(t){return 1==t.mtype}},{key:"isQuest",value:function(t){return this.isTwoWay(t)||this.isOneWay(t)}},{key:"isAnswer",value:function(t){return 2==t.mtype}},{key:"isSupportPack",value:function(t){return this.isMsgPack(t)!=this.isJson(t)}},{key:"enCode",value:function(t){return this.isOneWay(t)?this.enCodeOneway(t):this.isTwoWay(t)?this.enCodeTwoway(t):this.isAnswer(t)?this.enCodeAnswer(t):null}},{key:"enCodeOneway",value:function(t){var e=s.call(this,t,12+t.ss+t.psize);t.wpos=e.writeUInt8(t.ss,t.wpos),t.wpos=e.writeUInt32LE(t.psize,t.wpos);var i=r.BUFFER.from(t.method);if(t.wpos+=i.copy(e,t.wpos,0),this.isJson(t)){var n=r.BUFFER.from(t.payload);t.wpos+=n.copy(e,t.wpos,0)}return this.isMsgPack(t)&&(this.wpos+=this.payload.copy(e,this.wpos,0)),e}},{key:"enCodeTwoway",value:function(t){var e=s.call(this,t,16+t.ss+t.psize);t.wpos=e.writeUInt8(t.ss,t.wpos),t.wpos=e.writeUInt32LE(t.psize,t.wpos),t.wpos=e.writeUInt32LE(t.seq,t.wpos);var i=r.BUFFER.from(t.method);if(t.wpos+=i.copy(e,t.wpos,0),this.isJson(t)){var n=r.BUFFER.from(t.payload);t.wpos+=n.copy(e,t.wpos,0)}return this.isMsgPack(t)&&(t.wpos+=t.payload.copy(e,t.wpos,0)),e}},{key:"enCodeAnswer",value:function(t){var e=s.call(this,t,16+t.psize);if(t.wpos=e.writeUInt8(t.ss,t.wpos),t.wpos=e.writeUInt32LE(t.psize,t.wpos),t.wpos=e.writeUInt32LE(t.seq,t.wpos),this.isJson(t)){var i=r.BUFFER.from(t.payload);t.wpos+=i.copy(e,t.wpos,0)}return this.isMsgPack(t)&&(t.wpos+=t.payload.copy(e,t.wpos,0)),e}},{key:"peekHead",value:function(t){var e={},i=0,n=r.BUFFER.allocUnsafe(4);return i+=t.copy(n,0,i,i+4),e.magic=n,n=r.BUFFER.allocUnsafe(1),i+=t.copy(n,0,i,i+1),e.version=r.FPNN_VERSION.indexOf(n),i+=t.copy(n,0,i,i+1),e.flag=r.FP_FLAG.indexOf(n),i+=t.copy(n,0,i,i+1),e.mtype=r.FP_MESSAGE_TYPE.indexOf(n),i+=t.copy(n,0,i,i+1),e.ss=n.readUInt8(0),e.psize=t.readUInt32LE(i),e.wpos=i+4,e}},{key:"deCode",value:function(t){var e=this.peekHead(t);return this.isOneWay(e)&&this.deCodeOneWay(t,e),this.isTwoWay(e)&&this.deCodeTwoWay(t,e),this.isAnswer(e)&&this.deCodeAnswer(t,e),e}},{key:"deCodeOneWay",value:function(t,e){if(t.length==12+e.ss+e.psize){var i=r.BUFFER.allocUnsafe(e.ss);e.wpos+=t.copy(i,0,e.wpos,e.wpos+e.ss),e.method=i.toString();var n=r.BUFFER.allocUnsafe(e.psize);e.wpos+=t.copy(n,0,e.wpos),this.isJson(e)&&(e.payload=n.toString()),this.isMsgPack(e)&&(e.payload=n)}else e=null}},{key:"deCodeTwoWay",value:function(t,e){if(t.length==16+e.ss+e.psize){e.seq=t.readUInt32LE(e.wpos),e.wpos+=4;var i=r.BUFFER.allocUnsafe(e.ss);e.wpos+=t.copy(i,0,e.wpos,e.wpos+e.ss),e.method=i.toString();var n=r.BUFFER.allocUnsafe(e.psize);e.wpos+=t.copy(n,0,e.wpos),this.isJson(e)&&(e.payload=n.toString()),this.isMsgPack(e)&&(e.payload=n)}else e=null}},{key:"deCodeAnswer",value:function(t,e){if(t.length==16+e.psize){e.seq=t.readUInt32LE(e.wpos),e.wpos+=4;var i=r.BUFFER.allocUnsafe(e.psize);e.wpos+=t.copy(i,0,e.wpos),this.isJson(e)&&(e.payload=i.toString()),this.isMsgPack(e)&&(e.payload=i)}else e=null}}]),t}();function s(t,e){var i=r.BUFFER.allocUnsafe(e);return this.isHTTP(t)&&(t.wpos+=r.HTTP_MAGIC.copy(i,t.wpos,0)),this.isTCP(t)&&(t.wpos+=r.TCP_MAGIC.copy(i,t.wpos,0)),t.wpos+=r.FPNN_VERSION.copy(i,t.wpos,t.version,t.version+1),this.isJson(t)&&(t.wpos+=r.FP_FLAG.copy(i,t.wpos,t.flag,t.flag+1)),this.isMsgPack(t)&&(t.wpos+=r.FP_FLAG.copy(i,t.wpos,t.flag,t.flag+1)),t.wpos+=r.FP_MESSAGE_TYPE.copy(i,t.wpos,t.mtype,t.mtype+1),i}t.exports=o},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._socket=null}return n(t,[{key:"open",value:function(t){var e=this;try{this._socket=new WebSocket(t)}catch(t){return void this.emit("error",t)}this._socket.binaryType="arraybuffer",this._socket.onopen=function(t){e.emit("open")},this._socket.onmessage=function(t){e.emit("message",t.data)},this._socket.onclose=function(t){e.emit("close")},this._socket.onerror=function(t){e.emit("error",t)}}},{key:"send",value:function(t){try{this._socket.send(t)}catch(t){return void this.emit("error",t)}}},{key:"close",value:function(){this._socket&&this._socket.close()}},{key:"isOpen",get:function(){return!!this._socket&&this._socket.readyState==WebSocket.OPEN}},{key:"isConnecting",get:function(){return!!this._socket&&this._socket.readyState==WebSocket.CONNECTING}}]),t}();t.exports=r},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(0);var r=i(1),o=i(14),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.assign(this),this._endpoint=e.endpoint||null,this._timeout=e.connectionTimeout||1e4,this._platform=e.platformImpl||new o,this._connectTimeout=0,this._queue=[];var i=this;r.assign(this._platform),this._platform.on("open",function(){(function(){this._connectTimeout&&(clearTimeout(this._connectTimeout),this._connectTimeout=0);a.call(this),this.emit("connect")}).call(i)}),this._platform.on("message",function(t){(function(t){this.emit("data",t)}).call(i,t)}),this._platform.on("close",function(){u.call(i)}),this._platform.on("error",function(t){l.call(i,t)})}return n(t,[{key:"write",value:function(t){if(t)if("[object String]"===Object.prototype.toString.call(t))this._queue.push(t);else{var e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);this._queue.push(e)}a.call(this)}},{key:"close",value:function(t){t&&this.emit("error",t),this._platform.close()}},{key:"open",value:function(){if(this.isConnecting||this.isOpen||!this._endpoint)this.emit("error",new Error("has connected or worng endpoint!"));else{var t=this;this._connectTimeout&&(clearTimeout(this._connectTimeout),this._connectTimeout=0),this._connectTimeout=setTimeout(function(){var e=new Error("connect timeout!");if(t.isOpen)t.close(e);else{if(t.isConnecting)return t.close(e),void u.call(t);l.call(t,e),u.call(t)}},this._timeout),this._platform.open(this._endpoint)}}},{key:"destroy",value:function(){this.removeEvent(),this.close(),this._platform.removeEvent(),u.call(this)}},{key:"endpoint",get:function(){return this._endpoint}},{key:"isOpen",get:function(){return this._platform.isOpen}},{key:"isConnecting",get:function(){return this._platform.isConnecting}}]),t}();function a(){if(this.isOpen)for(;this._queue.length;)this._platform.send(this._queue.shift())}function u(){this._connectTimeout&&(clearTimeout(this._connectTimeout),this._connectTimeout=0),this._queue=[],this.emit("close")}function l(t){this.emit("error",t)}t.exports=s},function(t,e){e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,u=(1<<a)-1,l=u>>1,c=-7,f=i?r-1:0,h=i?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+f],f+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=l}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,u,l=8*o-r-1,c=(1<<l)-1,f=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*u-1)*Math.pow(2,r),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,r),s=0));r>=8;t[i+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[i+p]=255&s,p+=d,s/=256,l-=8);t[i+p-d]|=128*_}},function(t,e,i){"use strict";e.byteLength=function(t){var e=l(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){for(var e,i=l(t),n=i[0],s=i[1],a=new o(function(t,e,i){return 3*(e+i)/4-i}(0,n,s)),u=0,c=s>0?n-4:n,f=0;f<c;f+=4)e=r[t.charCodeAt(f)]<<18|r[t.charCodeAt(f+1)]<<12|r[t.charCodeAt(f+2)]<<6|r[t.charCodeAt(f+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=r[t.charCodeAt(f)]<<2|r[t.charCodeAt(f+1)]>>4,a[u++]=255&e);1===s&&(e=r[t.charCodeAt(f)]<<10|r[t.charCodeAt(f+1)]<<4|r[t.charCodeAt(f+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o=[],s=0,a=i-r;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));1===r?(e=t[i-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,i){for(var r,o,s=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e,i){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n=i(17),r=i(16);e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function s(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=a.prototype,e}function a(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return u(t,e,i)}function u(t,e,i){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i=0|p(t,e),n=s(i),r=n.write(t,e);r!==i&&(n=n.slice(0,r));return n}(t,e);if(ArrayBuffer.isView(t))return f(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return function(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i);return n.__proto__=a.prototype,n}(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,i);var r=function(t){if(a.isBuffer(t)){var e=0|h(t.length),i=s(e);return 0===i.length?i:(t.copy(i,0,0,e),i)}if(void 0!==t.length)return"number"!=typeof t.length||j(t.length)?s(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return l(t),s(t<0?0:0|h(t))}function f(t){for(var e=t.length<0?0:0|h(t.length),i=s(e),n=0;n<e;n+=1)i[n]=255&t[n];return i}function h(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(t).length;default:if(r)return n?-1:L(t).length;e=(""+e).toLowerCase(),r=!0}}function d(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function _(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),j(i=+i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,r){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,i/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=i;o<a;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(i+u>a&&(i=a-u),o=i;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(l(t,o+h)!==l(e,h)){f=!1;break}if(f)return o}return-1}function g(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(j(a))return s;t[i+s]=a}return s}function v(t,e,i,n){return D(L(e,t.length-i),t,i,n)}function m(t,e,i,n){return D(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function w(t,e,i,n){return m(t,e,i,n)}function b(t,e,i,n){return D(F(e),t,i,n)}function E(t,e,i,n){return D(function(t,e){for(var i,n,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function k(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function T(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,s,a,u,l=t[r],c=null,f=l>239?4:l>223?3:l>191?2:1;if(r+f<=i)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=f}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=R));return i}(n)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(t,e,i){return u(t,e,i)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(t,e,i){return function(t,e,i){return l(t),t<=0?s(t):void 0!==e?"string"==typeof i?s(t).fill(e,i):s(t).fill(e):s(t)}(t,e,i)},a.allocUnsafe=function(t){return c(t)},a.allocUnsafeSlow=function(t){return c(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=a.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(z(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},a.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,i);case"utf8":case"utf-8":return T(this,e,i);case"ascii":return O(this,e,i);case"latin1":case"binary":return C(this,e,i);case"base64":return k(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},a.prototype.compare=function(t,e,i,n,r){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var o=r-n,s=i-e,u=Math.min(o,s),l=this.slice(n,r),c=t.slice(e,i),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},a.prototype.indexOf=function(t,e,i){return _(this,t,e,i,!0)},a.prototype.lastIndexOf=function(t,e,i){return _(this,t,e,i,!1)},a.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,t,e,i);case"utf8":case"utf-8":return v(this,t,e,i);case"ascii":return m(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return b(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function O(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function A(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=B(t[o]);return r}function I(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function N(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,i,n,r,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function P(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function x(t,e,i,n,o){return e=+e,i>>>=0,o||P(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function U(t,e,i,n,o){return e=+e,i>>>=0,o||P(t,0,i,8),r.write(t,e,i,n,52,8),i+8}a.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},a.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},a.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||N(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),r.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),r.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),r.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),r.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e>>>=0,i>>>=0,n)||S(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},a.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e>>>=0,i>>>=0,n)||S(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},a.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e>>>=0,!n){var r=Math.pow(2,8*i-1);S(this,t,e,i,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},a.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e>>>=0,!n){var r=Math.pow(2,8*i-1);S(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},a.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeFloatLE=function(t,e,i){return x(this,t,e,!0,i)},a.prototype.writeFloatBE=function(t,e,i){return x(this,t,e,!1,i)},a.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},a.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},a.prototype.copy=function(t,e,i,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r=n-i;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,i,n);else if(this===t&&i<e&&e<n)for(var o=r-1;o>=0;--o)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,n),e);return r},a.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var r=t.charCodeAt(0);("utf8"===n&&r<128||"latin1"===n)&&(t=r)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var s=a.isBuffer(t)?t:a.from(t,n),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-e;++o)this[o+e]=s[o%u]}return this};var M=/[^+/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function F(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function D(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(0),o=i(1),s=i(15),a=i(13),u=i(12),l=i(11),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.assign(this),this._autoReconnect=e.autoReconnect||!1,this._proxy=e.proxy||null,this._proxy&&(this._proxy.targetEndpoint=e.endpoint,e.endpoint=this._proxy.endpoint),this._conn=new s(e);var i=this;this._conn.on("connect",function(){(function(){this._reconnectID&&(clearTimeout(this._reconnectID),this._reconnectID=0);this.emit("connect")}).call(i)}),this._conn.on("close",function(){h.call(i)}),this._conn.on("data",function(t){(function(t){t=r.BUFFER.from(t);var e=this._wpos+t.length;e>this._buffer.length&&p.call(this,e,2*r.READ_BUFFER_LEN);if(this._wpos+=t.copy(this._buffer,this._wpos,0),!this._readID){var i=this;this._readID=setInterval(function(){(function(){if(this._wpos<12)return;if(!this._peekData&&(this._peekData=function(t){var e=null;if(t.length>=12){if(e=this._pkg.peekHead(t),!function(t){if(!r.TCP_MAGIC.equals(t.magic)&&!r.HTTP_MAGIC.equals(t.magic))return!1;if(t.version<0||t.version>=r.FPNN_VERSION.length)return!1;if(t.flag<0||t.flag>=r.FP_FLAG.length)return!1;if(t.mtype<0||t.mtype>=r.FP_MESSAGE_TYPE.length)return!1;return!0}.call(this,e))return null;this._pkg.isOneWay(e)&&(e.pkgLen=12+e.ss+e.psize),this._pkg.isTwoWay(e)&&(e.pkgLen=16+e.ss+e.psize),this._pkg.isAnswer(e)&&(e.pkgLen=16+e.psize),e.pkgLen>0&&(e.buffer=r.BUFFER.allocUnsafe(e.pkgLen))}return e}.call(this,this._buffer),!this._peekData))return void this.conn.close(new Error("worng package!"));var t=this._wpos-this._peekData.pkgLen;if(t<0)return;this._buffer.copy(this._peekData.buffer,0,0,this._peekData.pkgLen);var e=this._pkg.deCode(this._peekData.buffer);if(p.call(this,2*t,r.READ_BUFFER_LEN,this._peekData.pkgLen),delete this._peekData,this._peekData=null,this._pkg.isAnswer(e)){var i=this._pkg.cbKey(e);this._cbs.execCb(i,e)}if(this._pkg.isQuest(e)){var n=this;this._psr.service(e,function(t,i){(function(t,e,i,n){var r={flag:t,mtype:2,seq:e,ss:(n=n||!1)?1:0,payload:i};this.sendQuest(r)}).call(n,e.flag,e.seq,t,i)})}}).call(i)},0)}}).call(i,t)}),this._conn.on("error",function(t){f.call(i,t)}),this._pkg=new a,this._cbs=new u,this._psr=new l,this._seq=0,this._wpos=0,this._peekData=null,this._readID=0,this._reconnectID=0,this._buffer=r.BUFFER.allocUnsafe(r.READ_BUFFER_LEN)}return n(t,[{key:"connect",value:function(){this.hasConnect?this._conn.close(new Error("has connected!")):this._conn.open()}},{key:"sendQuest",value:function(t,e,i){var n={};n.magic=t.magic||r.TCP_MAGIC,n.version=t.version||1,n.flag=t.flag||0,n.mtype=t.hasOwnProperty("mtype")?t.mtype:1,n.method=t.method,n.seq=t.hasOwnProperty("seq")?t.seq:++this._seq,n.payload=t.payload,n=this._pkg.buildPkgData(n),e&&this._cbs.addCb(this._pkg.cbKey(n),e,i);var o=this._pkg.enCode(n);this._proxy&&(o=this._proxy.buildProxyData(o)),this._conn.write(o)}},{key:"sendNotify",value:function(t){var e={};e.magic=t.magic||r.TCP_MAGIC,e.version=t.version||1,e.flag=t.flag||0,e.mtype=t.mtype||0,e.method=t.method,e.payload=t.payload,e=this._pkg.buildPkgData(e);var i=this._pkg.enCode(e);this._proxy&&(i=this._proxy.buildProxyData(i)),this._conn.write(i)}},{key:"close",value:function(t){t&&f.call(this,t),this._conn.close()}},{key:"destroy",value:function(){this._autoReconnect=!1,this.removeEvent(),this._psr.destroy(),this._conn.destroy(),h.call(this)}},{key:"processor",get:function(){return this._psr},set:function(t){return this._psr=t}},{key:"isOpen",get:function(){return this._conn.isOpen}},{key:"hasConnect",get:function(){return this._conn.isOpen||this._conn.isConnecting}}]),t}();function f(t){this.emit("error",t)}function h(){this._readID&&(clearInterval(this._readID),this._readID=0),this._reconnectID&&(clearTimeout(this._reconnectID),this._reconnectID=0),this._seq=0,this._wpos=0,this._peekData=null,this._cbs.removeCb(),this._buffer=r.BUFFER.allocUnsafe(r.READ_BUFFER_LEN),this.emit("close"),this._autoReconnect&&function(){if(this._reconnectID)return;var t=this;this._reconnectID=setTimeout(function(){t.connect()},100)}.call(this)}function p(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.max(t,e),o=r.BUFFER.allocUnsafe(n);this._wpos=this._buffer.copy(o,0,i,this._wpos),this._buffer=o}t.exports=c},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=i(1),o=i(19),s=i(10),a=i(9),u=i(3),l=i(8),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cyrMD5=i(6),r.assign(this),this._pid=e.pid,this._token=e.token,this._ping_eid=0,this._ping_latency=0,this._write_count=0,this._midCount=0,this._sendInterval=0,this._pingInterval=0,this._configVersion=0,this._platformImpl=e.platformImpl,this._platformRum=e.platformRum||new l,r.assign(this._platformRum),this._uid=e.uid&&e.uid.toString()||"",this._appv=e.appv||"",this._debug=e.debug||!1,this._ssl=e.ssl||!0,this._session=0,this._sessionTimestamp=0,this._proxy=null,this._baseClient=null,this._rumEvent=new a(this._pid,this._platformRum,this._debug),this._rid=null,this._first=!0}return n(t,[{key:"destroy",value:function(){this._midCount=0,this._ping_eid=0,this._write_count=0,this._sendInterval&&(clearInterval(this._sendInterval),this._sendInterval=0),this._pingInterval&&(clearInterval(this._pingInterval),this._pingInterval=0),this._platformImpl&&this._platformImpl.removeEvent(),this._rumEvent&&this._rumEvent.destroy(),this.removeEvent(),this._baseClient&&(this._baseClient.destroy(),this._baseClient=null)}},{key:"connect",value:function(t,e){if(null==this._baseClient){e&&this._rumEvent.clearStorage(),t=function(t){if(this._proxy)return t;var e="ws://";this._ssl&&(e="wss://");return e+t+"/service/websocket"}.call(this,t),this._debug&&console.log("[RUM] init: ",t),this._ssl&&(this._proxy=new s(t)),p.call(this),function(){var t=this;this._platformRum.addSelfListener(function(e){t.customEvent("launch_options",e)}),this._platformRum.on("visible_change",function(e){f.call(t,e?"fg":"bg",{})}),this._platformRum.on("network_change",function(e){f.call(t,"nwswitch",{sstate:e.ss,cstate:e.cs})}),this._platformRum.on("network",function(){_.call(t,{nw:t._platformRum.network},!0)}),this._platformRum.on("memory_warning",function(e){f.call(t,"warn",{type:"wx_memory_warn",level:e.level})}),this._platformRum.on("running_error",function(e){f.call(t,"error",{type:"wx_running_error",message:e.message,stack:e.stack})}),this._platformRum.on("update_info",function(e){f.call(t,"info",{type:"wx_version_update",hasUpdate:e.hasUpdate,status:e.status})}),this._platformRum.on("http_hook",function(e){var i={cstate:t._platformRum.network};e&&(e.req&&(i.url=e.req.url,i.method=e.req.method||"GET",i.reqsize=t._rumEvent.sizeof(e.req.data)),e.res&&(i.status=e.res.statusCode,i.attrs={errMsg:e.res.errMsg},i.respsize=t._rumEvent.sizeof(e.res.data)),i.latency=e.latency||0),t._debug&&console.log("[RUM] http hook: ",i),(!i.status||i.status>=300||i.latency>500)&&f.call(t,"http",i)})}.call(this),this._baseClient=new o({endpoint:t,autoReconnect:!0,connectionTimeout:u.SENT_TIMEOUT,proxy:this._proxy,platformImpl:this._platformImpl});var i=this;this._baseClient.on("connect",function(){if(i._debug&&console.log("[RUM] connect on rum agent!"),i._sessionTimestamp){var t=i._platformRum.isMobile?u.RESET_OPENEVENT_INTERVAL_MOBILE:u.RESET_OPENEVENT_INTERVAL;Date.now()-i._sessionTimestamp>=t&&p.call(i)}i.emit("ready"),function(){d.call(this);var t=this;if(this._pingInterval)return;this._pingInterval=setInterval(function(){d.call(t)},u.PING_INTERVAL)}.call(i),function(){if(this._sendInterval)return;var t=this;this._sendInterval=setInterval(function(){var e=t._rumEvent.getSentEvents();e.length&&(t._debug&&console.log("[rum] will be sent! ",e),function(t){var e=v.call(this),i={sign:g.call(this,e),salt:e,pid:this._pid,events:t},n={flag:0,method:"adds",payload:JSON.stringify(i)},r=this;w.call(this,this._baseClient,n,function(e,i){if(r._rumEvent.clearStorageEvents(t),e)return r.emit("error",e),void r._rumEvent.writeEvents(t,!0)},u.SENT_TIMEOUT)}.call(t,e))},1e3)}.call(i)}),this._baseClient.on("close",function(){i._debug&&console.log("[RUM] close from rum agent!"),function(){this._pingInterval&&(clearInterval(this._pingInterval),this._pingInterval=0)}.call(i),function(){this._sendInterval&&(clearInterval(this._sendInterval),this._sendInterval=0)}.call(i),i.emit("close")}),this._baseClient.on("error",function(t){i._debug&&console.log("[RUM] error: ",t),i.emit("error",t)}),this._baseClient.connect()}else this.emit("error",new Error("has been init!"))}},{key:"customEvent",value:function(t,e,i){var n={attrs:e||{}};f.call(this,t,n,i)}},{key:"uid",set:function(t){this._uid=t&&t.toString(),this._uid&&_.call(this,{uid:this._uid},!0)}}]),t}();function f(t,e,i){i=i||!1,e.eid||(e.eid=y.call(this),this._write_count++),e.ev=t,e.pid=this._pid||0,e.sid=this._session||0,e.uid=this._uid,e.rid=h.call(this),e.ts||this._rumEvent.timestamp&&(e.ts=this._rumEvent.timestamp),this._debug&&console.log("[RUM] write event: ",i,e),this._rumEvent.writeEvent(e,!1,i)}function h(){if(this._rid)return this._rid;var t=0,e="rum_rid_"+this._pid,i=this._platformRum.getItem(e);return this._first=!1,this._rumEvent.isEmpty(i)?(this._first=!0,t=b.call(this,0,16),this._platformRum.setItem(e,{rid:t})):t=i.rid,-1==(t=t.toString()).indexOf("-")&&(t=b.call(this,0,16),this._platformRum.setItem(e,{rid:t})),this._rid=t}function p(){this._session=y.call(this),this._sessionTimestamp=Date.now();var t={ip:"",sw:this._platformRum.screenwidth||0,sh:this._platformRum.screenheight||0};t.manu=this._platformRum.manu||"",t.model=this._platformRum.model||"",t.os=this._platformRum.os||"",t.osv=this._platformRum.osv||"",t.nw=this._platformRum.network||"",t.carrier=this._platformRum.carrier||"",t.lang=this._platformRum.lang||"",t.from=this._platformRum.from||"",t.appv=this._appv||"",t.first=this._first,t.v=u.VERSION,t.uid=this._uid,t.rid=h.call(this),f.call(this,"open",t,!0)}function d(){this._debug&&console.log("[RUM] ping...");var t=this._ping_eid,e=this._write_count;this._write_count=0,this._ping_eid=y.call(this);var i=v.call(this),n={pid:this._pid,sign:g.call(this,i),salt:i};n.uid=this._uid,n.rid=h.call(this),n.sid=this._session||0,n.cv=this._configVersion||0,n.pt=this._ping_latency||0,n.ss=this._rumEvent.storageSize||0,n.wc=e,n.feid=t,n.teid=this._ping_eid;var r={flag:0,method:"ping",payload:JSON.stringify(n)},o=this,s=this._platformRum.tickNow;w.call(this,this._baseClient,r,function(t,e){o._ping_latency=o._platformRum.tickNow-s,t?o.emit("error",t):(o._rumEvent.timestamp=+e.ts,o._rumEvent.sizeLimit=+e.bw,o._debug&&console.log("[RUM] ping:",o._configVersion,e),(o._configVersion!=+e.cv||0==+e.cv&&!o._rumEvent.rumConfig)&&(o._configVersion=+e.cv,function(){this._debug&&console.log("[RUM] load config...");var t=v.call(this),e={pid:this._pid,sign:g.call(this,t),salt:t};e.uid=this._uid,e.rid=h.call(this),e.lang=this._platformRum.lang||"",e.manu=this._platformRum.manu||"",e.model=this._platformRum.model||"",e.os=this._platformRum.os||"",e.osv=this._platformRum.osv||"",e.nw=this._platformRum.network||"",e.carrier=this._platformRum.carrier||"",e.from=this._platformRum.from||"",e.appv=this._appv||"";var i={flag:0,method:"getconfig",payload:JSON.stringify(e)},n=this;w.call(this,this._baseClient,i,function(t,e){if(t)return n._configversion=0,void n.emit("error",t);n._debug&&console.log("[RUM] load config:",e),n._rumEvent.updateConfig(e.events)},u.SENT_TIMEOUT)}.call(o)))},u.PING_INTERVAL)}function _(t,e){var i=this;if(t.sid||(t.sid=this._session||0),t.pid||(t.pid=this._pid||0),t.rid||(t.rid=h.call(this)),!t.ts){if(!this._rumEvent.timestamp)return void setTimeout(function(){_.call(i,t,!0)},1e4);t.ts=this._rumEvent.timestamp}this._debug&&console.log("[RUM] append user info.",e,t);var n=v.call(this);for(var r in t)t[r]&&0!=t[r].length||delete t[r];var o={sign:g.call(this,n),salt:n,user:t},s={flag:0,method:"append",payload:JSON.stringify(o)};w.call(this,this._baseClient,s,function(t,e){t&&i.emit("error",t)},u.SENT_TIMEOUT),e&&function(t){var e=this;setTimeout(function(i){_.call(e,t,!1)},1e4)}.call(this,t)}function y(){return++this._midCount>=999&&(this._midCount=0),+(Date.now().toString()+this._midCount)}function g(t){return this._cyrMD5(this._pid+":"+this._token+":"+t).toUpperCase()}function v(){return+Date.now().toString()}function m(t,e){return e?e instanceof Error?e:t&&e.code&&e.ex?new Error("code: "+e.code+", ex: "+e.ex):null:new Error("data is null!")}function w(t,e,i,n){var r=this;t?t.sendQuest(e,function(t){if(i){var e=null,n=!1;if(t.payload){var o=JSON.parse(t.payload);return 2==t.mtype&&(n=0!=t.ss),(e=m.call(r,n,o))?void i(e,null):void i(null,o)}(e=m.call(r,n,t))?i(t,null):i(null,t)}},n):i&&i(new Error("client is null!"),null)}function b(t,e){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],r=void 0;if(e=e||i.length,t)for(r=0;r<t;r++)n[r]=i[0|Math.random()*e];else{var o=void 0;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(o=0|16*Math.random(),n[r]=i[19==r?3&o|8:o]);var s=Date.now().toString();for(r=0;r<s.length;r++)n[r]=s.charAt(r)}return n.join("")}t.exports=c}]);
//# sourceMappingURL=rum.min.js.map